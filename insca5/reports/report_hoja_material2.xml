<?xml version="1.0"?>
<odoo>
    <template id="maincer.report_hoja_material2">
        <t t-call="web.html_container" t-lang="es_ES">
            <t t-call="maincer.external_layout_maincer">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="data" t-value="docs.recurse(doc.bom_line_ids, line_qty=1)"/>
                    <t t-set="all_data" t-value="docs.compute_all_lines_by_subconjunto()"/>

                    <div class="page" style="font-size:3.5mm">

                        <t t-foreach="all_data[0]" t-as="groups">
                            <table class="table table-sm o_main_table" name="bom_line_table">

                                <thead>
                                    <tr>
                                        <th colspan="8">
                                            <strong>
                                                <t t-esc="groups"/>
                                            </strong>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th name="th_entregado" class="text-center" style="width:15mm">
                                            <span>GESTWIN</span>
                                        </th>
                                        <th name="th_entregado" class="text-center">
                                            <span>ENT</span>
                                        </th>
                                        <th name="th_recibido" class="text-center">
                                            <span>REC</span>
                                        </th>
                                        <th name="th_quantity" class="text-right">
                                            <span>UDS</span>
                                        </th>
                                        <!--<th name="th_level" class="text-right">
                                            <span>LdM</span>
                                        </th>-->
                                        <th name="th_component" class="text-left" style="width:35mm">
                                            <span>Codigo</span>
                                        </th>
                                        <th name="th_component" class="text-left">
                                            <span>Componente</span>
                                        </th>
                                        <th name="th_material" class="text-left">
                                            <span>Material</span>
                                        </th>
                                        <th name="th_acabado" class="text-left">
                                            <span>Acabado</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="material_tbody">
                                    <t t-foreach="all_data[1]" t-as="values">
                                        <t t-foreach="values" t-as="line">
                                            <t t-set="groups2" t-value="line['subconjunto'] + ' - ' + line['seccion']"/>
                                                <t t-if="groups2 == groups">
                                                    <tr>
                                                        <td name="gestwin" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['gestwin']"/>
                                                        </td>
                                                        <td name="entregado" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['entregado']"/>
                                                        </td>
                                                        <td name="recibido" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['recibido']"/>
                                                        </td>
                                                        <td class="text-right" style="border: 0.5mm solid black;">
                                                            <t t-if="line['product_qty'] == int(line['product_qty'])">
                                                                <span t-esc="'%.0f'% line['product_qty']"/>
                                                            </t>
                                                            <t t-else="">
                                                                <span t-esc="'%.2f'% line['product_qty']"/>
                                                            </t>
                                                        </td>
                                                        <td class="text-left" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['default_code']"/>
                                                        </td>
                                                        <td class="text-left" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['name']"/>
                                                        </td>
                                                        <td class="text-left" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['material']"/>
                                                        </td>
                                                        <td class="text-left" style="border: 0.5mm solid black;">
                                                            <t t-esc="line['acabado']"/>
                                                        </td>
                                                    </tr>
                                            </t>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                        </t>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
